<!DOCTYPE html>
<head>    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <script>L_PREFER_CANVAS = false; L_NO_TOUCH = false; L_DISABLE_3D = false;</script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.2.0/dist/leaflet.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.2.0/dist/leaflet.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css" />
    <link rel="stylesheet" href="https://rawgit.com/python-visualization/folium/master/folium/templates/leaflet.awesome.rotate.css" />
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    
            <style> #map_4e65fe1387864efc8b4a9a43f830345c {
                position : relative;
                width : 100.0%;
                height: 100.0%;
                left: 0.0%;
                top: 0.0%;
                }
            </style>
        
    <script src="https://rawgit.com/socib/Leaflet.TimeDimension/master/dist/leaflet.timedimension.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/heatmap.js/2.0.2/heatmap.min.js"></script>
    <script src="https://rawgit.com/pa7/heatmap.js/develop/plugins/leaflet-heatmap/leaflet-heatmap.js"></script>
    <link rel="stylesheet" href="http://apps.socib.es/Leaflet.TimeDimension/dist/leaflet.timedimension.control.min.css" />
    
            <script>
                var TDHeatmap = L.TimeDimension.Layer.extend({

            initialize: function(data, options) {
                var heatmapCfg = {
                    radius: 15,
                    maxOpacity: 1.,
                    scaleRadius: false,
                    useLocalExtrema: false,
                    latField: 'lat',
                    lngField: 'lng',
                    valueField: 'count',
                    defaultWeight : 1,
                };
                heatmapCfg = $.extend({}, heatmapCfg, options.heatmapOptions || {});
                var layer = new HeatmapOverlay(heatmapCfg);
                L.TimeDimension.Layer.prototype.initialize.call(this, layer, options);
                this._currentLoadedTime = 0;
                this._currentTimeData = {
                    data: []
                    };
                this.data= data;
                this.defaultWeight = heatmapCfg.defaultWeight || 1;
            },
            onAdd: function(map) {
                L.TimeDimension.Layer.prototype.onAdd.call(this, map);
                map.addLayer(this._baseLayer);
                if (this._timeDimension) {
                    this._getDataForTime(this._timeDimension.getCurrentTime());
                }
            },
            _onNewTimeLoading: function(ev) {
                this._getDataForTime(ev.time);
                return;
            },
            isReady: function(time) {
                return (this._currentLoadedTime == time);
            },
            _update: function() {
                this._baseLayer.setData(this._currentTimeData);
                return true;
            },
            _getDataForTime: function(time) {
                    delete this._currentTimeData.data;
                    this._currentTimeData.data = [];
                    var data = this.data[time-1];
                    for (var i = 0; i < data.length; i++) {
                        this._currentTimeData.data.push({
                                lat: data[i][0],
                                lng: data[i][1],
                                count: data[i].length>2 ? data[i][2] : this.defaultWeight
                            });
                        }
                    this._currentLoadedTime = time;
                    if (this._timeDimension && time == this._timeDimension.getCurrentTime() && !this._timeDimension.isLoading()) {
                        this._update();
                    }
                    this.fire('timeload', {
                        time: time
                    });
                }
        });

        L.Control.TimeDimensionCustom = L.Control.TimeDimension.extend({
            initialize: function(index, options) {
                var playerOptions = {
                    buffer: 1,
                    minBufferReady: -1
                    };
                options.playerOptions = $.extend({}, playerOptions, options.playerOptions || {});
                L.Control.TimeDimension.prototype.initialize.call(this, options);
                this.index = index;
                },
            _getDisplayDateFormat: function(date){
                return this.index[date.getTime()-1];
                }
            });
            </script>
                
</head>
<body>    
    
            <div class="folium-map" id="map_4e65fe1387864efc8b4a9a43f830345c" ></div>
        
</body>
<script>    
    

            
                var bounds = null;
            

            var map_4e65fe1387864efc8b4a9a43f830345c = L.map(
                                  'map_4e65fe1387864efc8b4a9a43f830345c',
                                  {center: [48.0,5.0],
                                  zoom: 2.3,
                                  maxBounds: bounds,
                                  layers: [],
                                  worldCopyJump: false,
                                  crs: L.CRS.EPSG3857
                                 });
            
        
    
            var tile_layer_0fada0a9d79f4b7387c2ae9918f6cf15 = L.tileLayer(
                'https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.png',
                {
  "attribution": null,
  "detectRetina": false,
  "maxZoom": 18,
  "minZoom": 1,
  "noWrap": false,
  "subdomains": "abc"
}
                ).addTo(map_4e65fe1387864efc8b4a9a43f830345c);
        
    

            var times = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60];

            map_4e65fe1387864efc8b4a9a43f830345c.timeDimension = L.timeDimension(
                {times : times, currentTime: new Date(1)}
            );

            var heat_map_2076c02496d24674b08a235471ef44a7Control = new L.Control.TimeDimensionCustom(['1940', '1941', '1942', '1943', '1944', '1945', '1946', '1947', '1948', '1949', '1950', '1951', '1952', '1953', '1954', '1955', '1956', '1957', '1958', '1959', '1960', '1961', '1962', '1963', '1964', '1965', '1966', '1967', '1968', '1969', '1970', '1971', '1972', '1973', '1974', '1975', '1976', '1977', '1978', '1979', '1980', '1981', '1982', '1983', '1984', '1985', '1986', '1987', '1988', '1989', '1990', '1991', '1992', '1993', '1994', '1995', '1996', '1997', '1998', '1999'], {
                autoPlay: true,
                backwardButton: true,
                displayDate: true,
                forwardButton: true,
                limitMinimumRange: 5,
                limitSliders: true,
                loopButton: true,
                maxSpeed: 10,
                minSpeed: 0.1,
                playButton: true,
                playReverseButton: true,
                position: "bottomleft",
                speedSlider: true,
                speedStep: 0.1,
                styleNS: "leaflet-control-timecontrol",
                timeSlider: true,
                timeSliderDrapUpdate: false,
                timeSteps: 1
                })
                .addTo(map_4e65fe1387864efc8b4a9a43f830345c);

                var heat_map_2076c02496d24674b08a235471ef44a7 = new TDHeatmap([[], [], [], [], [], [], [], [], [], [], [], [], [], [], [[32.091620000000034, -96.463260000000005]], [[37.271879999999996, -119.27023], [52.478900000000067, -1.905869999999936]], [[38.627740000000003, -90.199510000000004], [43.595269999999999, -83.884909999999991], [19.59009, -155.43413999999999]], [], [[69.651020000000074, 18.955750000000023]], [], [], [], [], [], [[35.366959999999999, -119.01886]], [], [], [[21.439542579000033, -157.94363192999995], [32.514609999999998, -93.74727]], [], [], [], [], [[41.884149999999998, -87.632409999999993], [51.506420000000048, -0.1272099999999341]], [], [[37.766579999999998, -122.24473999999999], [52.108199999999997, 5.32986]], [], [], [], [[49.45431, 11.073939999999999], [40.714550000000003, -74.00712]], [], [[53.633280000000006, -3.0036499999999999]], [], [[38.366009999999996, -98.765140000000002]], [[51.381920000000036, 0.52251000000006798]], [], [[25.72898, -80.23742], [35.149760000000072, -90.049249999999958]], [[57.153819999999996, -2.1067900000000002], [51.506420000000048, -0.1272099999999341], [41.307109999999994, -72.924959999999999], [40.816770000000076, -73.066219999999987], [37.779159999999997, -122.42005], [38.579330000000034, -121.49089999999997], [64.556530000000009, 12.665380000000001], [40.857149999999997, -73.856780000000001], [35.22052, -90.014790000000005]], [[40.714550000000031, -74.007139999999936], [40.51032, -74.860990000000001], [33.74831000000006, -84.391109999999969], [52.37312, 4.8931899999999997], [34.053490000000004, -118.24531999999999], [22.25797, -97.868369999999999]], [[37.271879999999996, -119.27023], [30.420840000000002, -87.217240000000004], [51.506320000000002, -0.12714], [34.249609999999997, -80.607410000000002]], [[34.053490000000004, -118.24531999999999], [47.924079999999996, -97.032030000000006]], [[59.332570000000025, 18.066830000000039], [50.720399999999998, -1.8809099999999999], [39.766909999999996, -86.149959999999993], [38.899099999999997, -77.028999999999996], [39.049279999999996, -95.671180000000007], [36.614420000000003, -86.442099999999996], [-26.248750000000001, 27.843779999999999], [41.938249999999996, -93.389890000000008]], [[29.952440000000003, -90.052019999999999], [-17.829179999999997, 145.99647999999999], [42.503820000000005, 12.57347], [30.267590000000038, -97.742989999999963], [46.340179999999997, -72.545030000000011], [52.883559999999996, -1.9740599999999999]], [[64.950140000000005, 26.06739], [54.313919999999996, -2.2321800000000001], [43.234259999999999, -86.159350000000003], [35.914890000000071, -79.056769999999972], [33.520290000000003, -86.811499999999995], [18.015710000000002, -76.797309999999996], [43.465800000000002, 12.23545], [39.398703156000067, -99.414619189999939], [51.591090000000001, -0.14857999999999999], [33.892749999999999, 35.48527], [40.714550000000031, -74.007139999999936]], [[46.559417044000035, 2.5505399530000545], [51.506320000000002, -0.12714], [45.494409999999995, -114.14328], [-14.242920000000002, -54.387830000000008], [40.714550000000003, -74.00712], [51.506420000000048, -0.1272099999999341], [43.09798, 11.78532], [41.884149999999998, -87.632409999999993], [40.714000000000055, -73.829989999999952], [41.014000000000074, -74.17002999999994], [40.714550000000003, -74.00712], [52.516069999999992, 13.37698], [-24.9162, 133.39311000000001], [42.312559999999998, -71.088680000000011]], [[45.16433, 10.79509], [51.110631049000062, 10.39227793200007], [43.002600000000001, -83.782600000000002], [44.125199834000064, -84.196697499999971], [27.9758, -81.541060000000002], [40.714550000000003, -74.00712], [55.959300779000046, 10.053934054000024], [51.548180000000066, -0.073319999999966981], [18.04552, -77.026589999999999], [37.08507000000003, 37.440500000000036], [32.614359999999998, -86.680730000000011], [53.479599999999998, -2.2488099999999998]], [[45.512400000000063, -73.554689999999937], [40.190329999999996, -82.66946999999999], [53.383109999999995, -1.46454], [35.631959999999999, 139.43393999999998], [40.817409999999995, -74.216119999999989], [33.326070000000001, -83.388210000000001], [38.899099999999997, -77.028999999999996], [35.830729999999996, -85.978740000000002], [39.740010000000041, -104.99201999999997], [53.408386605000025, -1.9695595439999352], [51.560959999999994, -0.23443000000000003], [51.506320000000002, -0.12714], [35.520690000000002, -84.36354], [42.331680000000063, -83.047999999999931], [37.271879999999996, -119.27023], [62.198450000000001, 17.55142], [37.805059999999997, -122.27301999999999], [47.255130000000001, -122.44165], [40.714550000000003, -74.00712], [-19.93272, 145.77406000000002]], [[40.714550000000003, -74.00712], [8.4177, -80.112780000000001], [39.374130000000001, 22.957750000000001], [57.701330000000006, 11.966889999999999], [7.3788399999999994, 3.8952699999999996], [37.779159999999997, -122.42005], [43.850749999999998, -79.021090000000001], [32.715680000000077, -117.16170999999996], [34.101560000000056, -118.33707999999996], [33.667099999999998, -117.76505], [42.351900000000001, -71.145659999999992], [40.726320011108534, -73.986260073287411], [40.714550000000031, -74.007139999999936], [37.779159999999997, -122.42005], [19.431899999999999, -99.132850000000005], [36.068000000000005, -90.956400000000002], [34.197629999999997, -86.165590000000009], [38.60642, -78.174520000000001], [40.25986000000006, -76.882229999999936], [49.899530000000027, -97.141129999999976], [46.948430000000002, 7.4404600000000007]], [[32.585070000000002, -89.873739999999998], [53.479599999999998, -2.2488099999999998], [40.714550000000003, -74.00712], [37.779159999999997, -122.42005], [52.883559999999996, -1.9740599999999999], [51.164180000000002, 10.45415], [42.312559999999998, -71.088680000000011], [53.408386605000025, -1.9695595439999352], [40.816770000000076, -73.066219999999987], [62.198450000000001, 17.55142], [21.511020000000002, -77.806790000000007], [51.110631049000062, 10.39227793200007], [29.952440000000003, -90.052019999999999], [40.714000000000055, -73.829989999999952], [26.272490000000001, -80.253059999999991], [10.17822, -68.003119999999996], [53.383109999999995, -1.46454], [59.332169999999998, 18.062429999999999], [39.398703156000067, -99.414619189999939], [42.503820000000005, 12.57347], [16.85576, -69.468540000000004], [42.179629999999996, -72.92483], [40.714550000000003, -74.00712], [51.164180000000002, 10.45415], [38.899099999999997, -77.028999999999996], [53.383109999999995, -1.46454], [-24.9162, 133.39311000000001], [44.979030000000002, -93.264930000000007], [48.856920000000002, 2.3412099999999998], [45.511790000000005, -122.67563], [36.876519999999999, -89.588280000000012]], [[30.9742, -91.523820000000001], [40.862079981678171, -73.897119977782978], [51.506420000000048, -0.1272099999999341], [36.171910000000025, -115.13996999999996], [40.692450000000072, -73.990359999999953], [41.884149999999998, -87.632409999999993], [42.331679999999999, -83.047919999999991], [51.526530000000037, 0.02876000000003387], [60.167730054965631, 24.763780075738477], [50.44332, -4.9398599999999995], [34.053490000000004, -118.24531999999999], [51.482240000000004, -2.78071]], [[27.9758, -81.541060000000002], [41.903220000000033, 12.495650000000069], [42.331679999999999, -83.047919999999991], [51.963009999999997, 7.6178100000000004], [40.714550000000003, -74.00712], [48.857210000000066, 2.3414400000000342], [37.167929999999998, -95.845019999999991], [49.194890000000036, -123.17922999999996], [48.136409999999998, 11.57752], [43.26099, -79.888450000000006], [39.740229999999997, -75.550840000000008], [25.774810000000056, -80.197729999999979], [39.759200000000078, -84.193809999999985], [-33.108484500000003, 151.64659800000004], [29.953700000000023, -90.07774999999998], [62.198450000000001, 17.55142], [34.053490000000004, -118.24531999999999], [44.727200000000003, -90.101259999999996], [52.478590000000004, -1.9086000000000001], [40.731970000000004, -74.174180000000007], [38.579330000000034, -121.49089999999997], [40.438309999999994, -79.997450000000001]]],
                {heatmapOptions: {
                        radius: 15,
                        minOpacity: 0,
                        maxOpacity: 0.8,
                        scaleRadius: false,
                        useLocalExtrema: false,
                        defaultWeight: 1 ,
                    }
                })
                .addTo(map_4e65fe1387864efc8b4a9a43f830345c);

        
</script>